{# templates/login/index.html.twig #}
{% extends 'base.html.twig' %}

{# ... #}

{% block body %}
	{% if error %}
		<div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
	{% endif %}
	<h1 class="text-center my-4">CONNEXION</h1>
	<section class="toconnect row mx-auto">
		<div class="connect photo col-12 col-md-6 col-lg-6 my-4 py-4 px-auto mx-auto">
			<form action="{{ path('login') }}" method="post" class="column mb-4">
				<input type="text" id="username" name="_username" class="mb-4" placeholder="EMAIL" value="{{ last_username }}"/>
				<input type="password" name="_password" id="password" placeholder="MOT DE PASSE" class="mb-4">
				<i class="far fa-eye" id="togglePassword"></i>
				{# If you want to control the URL the user is redirected to on success #}
				<input type="hidden" name="{{ path('app_index') }}" value="/app"/>
				<a href="{{ path('app_index') }}" class="d-flex justify-content-center btn">
					<button type="submit" class="btn">
						LOGIN
					</button>
				</a>
			</form>
		</div>
		<p class="text-center mt-0 mt-lg-4">Pas encore inscrit?
			<a href="{{ path('app_register') }}">INSCRIS-TOI</a>
		</p>
	</section>
	{% block javascripts %}
	<script>
		const togglePassword = document.querySelector('#togglePassword');
		const password = document.querySelector('#password');

		togglePassword.addEventListener('click', function (e) { // changer l'attribut type
		const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
		password.setAttribute('type', type);
		// changer l'oeil slash icon
		this.classList.toggle('fa-eye-slash');
		});
	</script>
	{% endblock %}
{% endblock %}
